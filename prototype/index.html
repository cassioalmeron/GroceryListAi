<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grocery List AI - Home</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Shared Styles -->
    <link rel="stylesheet" href="styles.css">

    <style>
        /* Page-specific styles for index.html */

        /* Typing indicator animation */
        @keyframes typing {
            0%, 80%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .typing-dot {
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) {
            animation-delay: -0.32s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: -0.16s;
        }

        /* Settings button rotation on hover */
        .settings-btn:hover svg {
            transform: rotate(45deg);
            transition: transform 0.2s ease;
        }

        /* Recording pulse animation */
        @keyframes pulse-red {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }

        .recording {
            animation: pulse-red 1.5s infinite;
        }
    </style>
</head>
<body class="min-h-screen flex">
    <!-- Left Sidebar Navigation -->
    <aside id="sidebar" class="sidebar fixed md:sticky top-0 left-0 h-screen w-64 flex flex-col z-50" style="background-color: var(--sidebar-bg); border-right: 1px solid var(--sidebar-border);">
        <!-- Logo/Brand -->
        <div class="p-6" style="border-bottom: 1px solid var(--sidebar-border);">
            <h2 class="text-xl font-semibold" style="color: var(--text-primary);">Grocery List AI</h2>
        </div>

        <!-- Navigation Links -->
        <nav class="flex-1 p-4">
            <ul class="space-y-2">
                <li>
                    <a href="index.html" class="flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-colors" style="background-color: var(--accent-primary); color: white;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                            <polyline points="9 22 9 12 15 12 15 22"></polyline>
                        </svg>
                        Home
                    </a>
                </li>
                <li>
                    <a href="settings.html" class="flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-colors" style="color: var(--text-secondary);" onmouseover="this.style.backgroundColor='var(--bg-hover)'; this.style.color='var(--text-primary)';" onmouseout="this.style.backgroundColor='transparent'; this.style.color='var(--text-secondary)';">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path d="M12 1v6m0 6v6m-6-6h6m6 0h6"></path>
                            <path d="M19.07 4.93l-4.24 4.24m0 5.66l4.24 4.24M4.93 4.93l4.24 4.24m0 5.66l-4.24 4.24"></path>
                        </svg>
                        Settings
                    </a>
                </li>
            </ul>
        </nav>

        <!-- Footer info -->
        <div class="p-4 text-xs" style="border-top: 1px solid var(--sidebar-border); color: var(--text-muted);">
            <p>Version 1.0.0</p>
            <p class="mt-1">Last updated: Dec 20, 2025 at 3:45 PM</p>
        </div>
    </aside>

    <!-- Mobile Menu Button -->
    <button
        id="menuToggle"
        class="md:hidden fixed top-4 left-4 rounded-lg w-12 h-12 flex items-center justify-center transition-all z-40"
        style="background-color: var(--bg-card); border: 1px solid var(--border-primary); color: var(--text-primary);"
        onmouseover="this.style.backgroundColor='var(--bg-hover)'; this.style.borderColor='var(--accent-primary)';"
        onmouseout="this.style.backgroundColor='var(--bg-card)'; this.style.borderColor='var(--border-primary)';"
        onclick="toggleMenu()"
    >
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
    </button>

    <!-- Overlay for mobile menu -->
    <div id="overlay" class="md:hidden hidden fixed inset-0 bg-black/50 z-40" onclick="toggleMenu()"></div>

    <!-- Main Container -->
    <div class="flex-1 overflow-auto">
        <div class="max-w-7xl mx-auto p-4">
        <div class="flex flex-col lg:flex-row gap-8 min-h-[calc(100vh-8rem)]">

            <!-- Left Panel - Todo List -->
            <div class="flex-1 min-w-0 lg:min-w-[400px]">
                <div class="h-full rounded-xl shadow-lg flex flex-col p-6" style="background-color: var(--bg-card); border: 1px solid var(--border-primary);">
                    <h1 class="text-2xl font-semibold text-center mb-6" style="color: var(--text-primary);">Todo List</h1>

                    <!-- Add Todo Input -->
                    <div class="flex gap-4 mb-8">
                        <input
                            type="text"
                            id="todoInput"
                            placeholder="Enter a new todo..."
                            class="flex-1 px-3 py-2 rounded-lg outline-none transition-colors"
                            style="background-color: var(--input-bg); color: var(--text-primary); border: 2px solid var(--input-border);"
                            onfocus="this.style.borderColor='var(--accent-primary)';"
                            onblur="this.style.borderColor='var(--input-border)';"
                        />
                        <button
                            onclick="addTodo()"
                            class="px-6 py-2 text-white rounded-lg font-medium transition-colors"
                            style="background-color: var(--accent-primary);"
                            onmouseover="this.style.backgroundColor='var(--accent-hover)';"
                            onmouseout="this.style.backgroundColor='var(--accent-primary)';"
                        >
                            Add
                        </button>
                    </div>

                    <!-- Todo List -->
                    <ul id="todoList" class="flex-1 space-y-2 overflow-y-auto custom-scrollbar">
                        <!-- Sample todos -->
                        <li class="flex items-center gap-4 p-4 rounded-lg transition-colors" style="background-color: var(--bg-tertiary); border: 1px solid var(--border-secondary);" onmouseover="this.style.backgroundColor='var(--bg-hover)';" onmouseout="this.style.backgroundColor='var(--bg-tertiary)';">
                            <input type="checkbox" class="w-5 h-5 cursor-pointer accent-[#646cff]" onchange="toggleTodo(this)">
                            <span class="flex-1" style="color: var(--text-primary);">Buy milk</span>
                            <button onclick="removeTodo(this)" class="px-4 py-1 text-white rounded-md transition-colors text-sm" style="background-color: var(--danger);" onmouseover="this.style.backgroundColor='#c82333';" onmouseout="this.style.backgroundColor='var(--danger)';">
                                Remove
                            </button>
                        </li>
                        <li class="flex items-center gap-4 p-4 rounded-lg transition-colors" style="background-color: var(--bg-tertiary); border: 1px solid var(--border-secondary);" onmouseover="this.style.backgroundColor='var(--bg-hover)';" onmouseout="this.style.backgroundColor='var(--bg-tertiary)';">
                            <input type="checkbox" class="w-5 h-5 cursor-pointer accent-[#646cff]" onchange="toggleTodo(this)">
                            <span class="flex-1" style="color: var(--text-primary);">Buy eggs</span>
                            <button onclick="removeTodo(this)" class="px-4 py-1 text-white rounded-md transition-colors text-sm" style="background-color: var(--danger);" onmouseover="this.style.backgroundColor='#c82333';" onmouseout="this.style.backgroundColor='var(--danger)';">
                                Remove
                            </button>
                        </li>
                        <li class="flex items-center gap-4 p-4 rounded-lg opacity-60" style="background-color: var(--bg-secondary); border: 1px solid var(--border-secondary);">
                            <input type="checkbox" class="w-5 h-5 cursor-pointer accent-[#646cff]" checked onchange="toggleTodo(this)">
                            <span class="flex-1 line-through" style="color: var(--text-muted);">Buy bread</span>
                            <button onclick="removeTodo(this)" class="px-4 py-1 text-white rounded-md transition-colors text-sm" style="background-color: var(--danger);" onmouseover="this.style.backgroundColor='#c82333';" onmouseout="this.style.backgroundColor='var(--danger)';">
                                Remove
                            </button>
                        </li>
                    </ul>

                    <!-- Empty State (hidden by default) -->
                    <p id="emptyMessage" class="text-center italic mt-8 hidden" style="color: var(--text-muted);">
                        No todos yet. Add one above!
                    </p>
                </div>
            </div>

            <!-- Right Panel - Chat -->
            <div class="flex-1 min-w-0 lg:min-w-[400px]">
                <div class="h-full rounded-xl shadow-lg flex flex-col overflow-hidden" style="background-color: var(--bg-card); border: 1px solid var(--border-primary);">

                    <!-- Chat Header -->
                    <div class="flex justify-between items-center px-6 py-4" style="background-color: var(--bg-secondary); border-bottom: 1px solid var(--border-primary);">
                        <h2 class="text-xl font-semibold" style="color: var(--text-primary);">AI Assistant</h2>
                        <div class="flex items-center gap-2 text-sm font-medium" style="color: var(--success);">
                            <span class="w-2 h-2 rounded-full pulse" style="background-color: var(--success);"></span>
                            Online
                        </div>
                    </div>

                    <!-- Chat Messages -->
                    <div id="chatMessages" class="flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar" style="background-color: var(--bg-card);">
                        <!-- Welcome Message -->
                        <div class="text-center py-8">
                            <h3 class="text-lg mb-2" style="color: var(--text-secondary);">Welcome!</h3>
                            <p class="text-sm" style="color: var(--text-muted);">Start a conversation with the AI assistant. Ask me anything!</p>
                        </div>

                        <!-- Sample User Message -->
                        <div class="flex justify-end">
                            <div class="max-w-[70%] text-white px-4 py-3 rounded-2xl rounded-br-md" style="background-color: var(--chat-user-bg);">
                                <div class="mb-1">Add milk to my list</div>
                                <div class="text-xs opacity-70 text-right">2:30 PM</div>
                            </div>
                        </div>

                        <!-- Sample AI Message -->
                        <div class="flex justify-start">
                            <div class="max-w-[70%] px-4 py-3 rounded-2xl rounded-bl-md" style="background-color: var(--chat-ai-bg); color: var(--chat-ai-text); border: 1px solid var(--chat-ai-border);">
                                <div class="mb-1">I've added milk to your grocery list!</div>
                                <div class="text-xs opacity-70">2:30 PM</div>
                            </div>
                        </div>

                        <!-- Typing Indicator (hidden by default) -->
                        <div id="typingIndicator" class="flex justify-start hidden">
                            <div class="px-4 py-3 rounded-2xl rounded-bl-md" style="background-color: var(--chat-ai-bg); border: 1px solid var(--chat-ai-border);">
                                <div class="flex items-center gap-1">
                                    <span class="w-1.5 h-1.5 bg-gray-400 rounded-full typing-dot"></span>
                                    <span class="w-1.5 h-1.5 bg-gray-400 rounded-full typing-dot"></span>
                                    <span class="w-1.5 h-1.5 bg-gray-400 rounded-full typing-dot"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Chat Input -->
                    <div class="px-6 py-4" style="background-color: var(--bg-secondary); border-top: 1px solid var(--border-primary);">
                        <div class="flex items-end gap-3 rounded-3xl p-2 transition-all" style="background-color: var(--input-bg); border: 1px solid var(--input-border);" onfocusin="this.style.borderColor='var(--accent-primary)'; this.style.boxShadow='0 0 0 3px rgba(59,130,246,0.1)';" onfocusout="this.style.borderColor='var(--input-border)'; this.style.boxShadow='none';">
                            <textarea
                                id="chatInput"
                                rows="1"
                                placeholder="Type your message here..."
                                class="flex-1 bg-transparent text-sm px-3 py-2 outline-none resize-none"
                                style="color: var(--text-primary);"
                                onkeypress="handleChatKeyPress(event)"
                            ></textarea>

                            <!-- Microphone Button -->
                            <button
                                id="micButton"
                                onclick="toggleRecording()"
                                class="w-10 h-10 text-white rounded-full flex items-center justify-center transition-all flex-shrink-0"
                                style="background-color: var(--success);"
                                onmouseover="this.style.backgroundColor='#059669'; this.style.transform='scale(1.05)';"
                                onmouseout="this.style.backgroundColor='var(--success)'; this.style.transform='scale(1)';"
                                title="Start voice recording"
                            >
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                                    <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                                    <line x1="12" y1="19" x2="12" y2="23"></line>
                                    <line x1="8" y1="23" x2="16" y2="23"></line>
                                </svg>
                            </button>

                            <!-- Send Button -->
                            <button
                                onclick="sendMessage()"
                                class="w-10 h-10 text-white rounded-full flex items-center justify-center transition-all flex-shrink-0"
                                style="background-color: var(--chat-user-bg);"
                                onmouseover="this.style.backgroundColor='#2563eb'; this.style.transform='scale(1.05)';"
                                onmouseout="this.style.backgroundColor='var(--chat-user-bg)'; this.style.transform='scale(1)';"
                                onmousedown="this.style.transform='scale(0.95)';"
                                onmouseup="this.style.transform='scale(1.05)';"
                            >
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="22" y1="2" x2="11" y2="13"></line>
                                    <polygon points="22,2 15,22 11,13 2,9"></polygon>
                                </svg>
                            </button>
                        </div>

                        <!-- Recording Status (hidden by default) -->
                        <div id="recordingStatus" class="hidden mt-2 flex items-center gap-2 px-3 py-2 bg-red-500/10 border border-red-500/30 rounded-xl text-red-500 text-sm font-medium">
                            <div class="flex items-center gap-1">
                                <span class="w-1 h-3 bg-red-500 rounded-sm recording"></span>
                                <span class="w-1 h-3 bg-red-500 rounded-sm recording" style="animation-delay: 0.1s"></span>
                                <span class="w-1 h-3 bg-red-500 rounded-sm recording" style="animation-delay: 0.2s"></span>
                            </div>
                            <span>Listening... Speak now</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </div>

    <script>
        // Mobile Menu Toggle
        function toggleMenu() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('overlay');
            sidebar.classList.toggle('open');
            overlay.classList.toggle('hidden');
        }


        // Todo List Functions
        function addTodo() {
            const input = document.getElementById('todoInput');
            const text = input.value.trim();

            if (text === '') return;

            const todoList = document.getElementById('todoList');
            const emptyMessage = document.getElementById('emptyMessage');

            // Hide empty message
            emptyMessage.classList.add('hidden');

            // Create new todo item
            const li = document.createElement('li');
            li.className = 'flex items-center gap-4 p-4 rounded-lg transition-colors';
            li.style.backgroundColor = 'var(--bg-tertiary)';
            li.style.border = '1px solid var(--border-secondary)';
            li.onmouseover = function() { this.style.backgroundColor = 'var(--bg-hover)'; };
            li.onmouseout = function() { this.style.backgroundColor = 'var(--bg-tertiary)'; };
            li.innerHTML = `
                <input type="checkbox" class="w-5 h-5 cursor-pointer accent-[#646cff]" onchange="toggleTodo(this)">
                <span class="flex-1" style="color: var(--text-primary);">${text}</span>
                <button onclick="removeTodo(this)" class="px-4 py-1 text-white rounded-md transition-colors text-sm" style="background-color: var(--danger);" onmouseover="this.style.backgroundColor='#c82333';" onmouseout="this.style.backgroundColor='var(--danger)';">
                    Remove
                </button>
            `;

            todoList.appendChild(li);
            input.value = '';
        }

        function removeTodo(button) {
            const li = button.closest('li');
            li.remove();

            // Show empty message if no todos left
            const todoList = document.getElementById('todoList');
            const emptyMessage = document.getElementById('emptyMessage');
            if (todoList.children.length === 0) {
                emptyMessage.classList.remove('hidden');
            }
        }

        function toggleTodo(checkbox) {
            const li = checkbox.closest('li');
            const span = li.querySelector('span');

            if (checkbox.checked) {
                li.className = 'flex items-center gap-4 p-4 rounded-lg opacity-60';
                li.style.backgroundColor = 'var(--bg-secondary)';
                li.style.border = '1px solid var(--border-secondary)';
                li.onmouseover = null;
                li.onmouseout = null;
                span.className = 'flex-1 line-through';
                span.style.color = 'var(--text-muted)';
            } else {
                li.className = 'flex items-center gap-4 p-4 rounded-lg transition-colors';
                li.style.backgroundColor = 'var(--bg-tertiary)';
                li.style.border = '1px solid var(--border-secondary)';
                li.style.opacity = '1';
                li.onmouseover = function() { this.style.backgroundColor = 'var(--bg-hover)'; };
                li.onmouseout = function() { this.style.backgroundColor = 'var(--bg-tertiary)'; };
                span.className = 'flex-1';
                span.style.color = 'var(--text-primary)';
            }
        }

        // Chat Functions
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const text = input.value.trim();

            if (text === '') return;

            const chatMessages = document.getElementById('chatMessages');

            // Add user message
            const userMessage = document.createElement('div');
            userMessage.className = 'flex justify-end';
            userMessage.innerHTML = `
                <div class="max-w-[70%] text-white px-4 py-3 rounded-2xl rounded-br-md" style="background-color: var(--chat-user-bg);">
                    <div class="mb-1">${text}</div>
                    <div class="text-xs opacity-70 text-right">${getCurrentTime()}</div>
                </div>
            `;
            chatMessages.appendChild(userMessage);

            input.value = '';

            // Show typing indicator
            const typingIndicator = document.getElementById('typingIndicator');
            typingIndicator.classList.remove('hidden');

            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;

            // Simulate AI response after 2 seconds
            setTimeout(() => {
                typingIndicator.classList.add('hidden');

                const aiMessage = document.createElement('div');
                aiMessage.className = 'flex justify-start';
                aiMessage.innerHTML = `
                    <div class="max-w-[70%] px-4 py-3 rounded-2xl rounded-bl-md" style="background-color: var(--chat-ai-bg); color: var(--chat-ai-text); border: 1px solid var(--chat-ai-border);">
                        <div class="mb-1">This is a prototype. In the real app, I would respond to: "${text}"</div>
                        <div class="text-xs opacity-70">${getCurrentTime()}</div>
                    </div>
                `;
                chatMessages.appendChild(aiMessage);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }, 2000);
        }

        function handleChatKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        function getCurrentTime() {
            const now = new Date();
            return now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }

        let isRecording = false;

        function toggleRecording() {
            const micButton = document.getElementById('micButton');
            const recordingStatus = document.getElementById('recordingStatus');

            isRecording = !isRecording;

            if (isRecording) {
                micButton.className = 'w-10 h-10 bg-[#ef4444] text-white rounded-full flex items-center justify-center hover:bg-[#dc2626] transition-all flex-shrink-0 recording';
                micButton.innerHTML = `
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="6" y="6" width="12" height="12" rx="2" ry="2"></rect>
                    </svg>
                `;
                micButton.title = 'Stop recording';
                recordingStatus.classList.remove('hidden');

                // Simulate recording end after 3 seconds
                setTimeout(() => {
                    if (isRecording) {
                        toggleRecording();
                        document.getElementById('chatInput').value = "Sample transcribed text";
                    }
                }, 3000);
            } else {
                micButton.className = 'w-10 h-10 bg-[#10b981] text-white rounded-full flex items-center justify-center hover:bg-[#059669] hover:scale-105 transition-all flex-shrink-0';
                micButton.innerHTML = `
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                        <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                        <line x1="12" y1="19" x2="12" y2="23"></line>
                        <line x1="8" y1="23" x2="16" y2="23"></line>
                    </svg>
                `;
                micButton.title = 'Start voice recording';
                recordingStatus.classList.add('hidden');
            }
        }

        // Allow Enter key to add todos
        document.getElementById('todoInput').addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                addTodo();
            }
        });

        // Theme initialization
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            const savedActualTheme = localStorage.getItem('actualTheme') || 'dark';

            // Apply saved theme
            document.documentElement.setAttribute('data-theme', savedActualTheme);
        }

        // Initialize theme on page load
        window.addEventListener('DOMContentLoaded', () => {
            initTheme();

            // Listen for system theme changes when Auto is selected
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
                const currentTheme = localStorage.getItem('theme');
                if (currentTheme === 'auto') {
                    const newTheme = e.matches ? 'dark' : 'light';
                    document.documentElement.setAttribute('data-theme', newTheme);
                    localStorage.setItem('actualTheme', newTheme);
                }
            });
        });
    </script>
</body>
</html>
